{% load static %} {% include 'header.html' %}

<body class="grey lighten-2">
  <div class="row">
    <div class="col s12">
      <h1 class="center">Expenses</h1>

      {% comment %} Table showing all Expenses {% endcomment %}
      <table class="highlight centered">
        <thead>
          <tr>
            <th>Date</th>
            <th>Company</th>
            <th>Description</th>
            <th>Price</th>
            <th>House</th>
            <th>Edit or delete</th>
          </tr>
        </thead>
        {% for budget in budget %}
        <tbody>
          <tr>
            <td>{{ budget.date}}</td>
            <td>{{ budget.company }}</td>
            <td>{{ budget.description }}</td>
            <td>${{ budget.cost }}</td>
            <td>{{ budget.house }}</td>
            <td>
              <a
                class="btn blue darken-4"
                href="{% url 'update_budget' budget.id %}"
                >Edit</a
              >
              <a class="btn red" href="{% url 'delete_budget' budget.id %}"
                >Delete</a
              >
            </td>
          </tr>
        </tbody>
        {% endfor %}
      </table>
    </div>
  </div>

  {% comment %} Hide / show form {% endcomment %}
  <div class="">
    <button
      class="btn z-depth-5 blue darken-4 center-align"
      onclick="myFunction()"
    >
      Add Expense
    </button>
    <div id="myDIV" style="display: none">
      <form
        action="{% url 'add_budget' %}"
        enctype="multipart/form-data"
        method="post"
      >
        {% csrf_token %} {{ budget_form.as_p }}
        <input
          type="submit"
          class="btn z-depth-5 blue darken-4"
          value="sbumit expense"
        />
      </form>
    </div>
  </div>

  {% comment %} card panel showing total Spent {% endcomment %}
  <div class="row container">
    <div class="col s12 m6 center-align">
      <div class="card-panel z-depth-5 center-align">
        <div>
          <h4>Total Spent</h4>
          <hr />
          <p>${{ sum_of_expenses }}</p>
        </div>
      </div>
    </div>
  </div>
</body>

{% include 'footer.html' %}
